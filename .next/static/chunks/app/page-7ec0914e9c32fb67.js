(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1357:function(e,t,s){Promise.resolve().then(s.bind(s,5779))},5779:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return er}});var a,l,i,r,n=s(7437),d=s(2265);(a=i||(i={})).PENDING="Pending",a.CONFIRMED="Confirmed",a.SHIPPED="Shipped",a.DELIVERED="Delivered",a.RETURNED_FREE="Returned (Free)",a.RETURNED_PAID="Returned (Paid)",a.LOST_DAMAGED="Lost/Damaged",(l=r||(r={})).TESTING="Testing",l.SCALING="Scaling",l.AWARENESS="Awareness";let o=(0,d.createContext)(void 0),c="craftledger_data_v1",x=[{id:"m1",name:"Premium Cowhide (Brown)",cost:1500,yield:30,date:"2023-10-01",remainingUnits:15},{id:"m2",name:"Waxed Thread (Roll)",cost:100,yield:50,date:"2023-10-01",remainingUnits:30}],m=[{id:"p1",name:"Classic Bifold Wallet",price:350,materialIds:["m1","m2"],laborCost:40,packagingCost:15,shippingCost:35}],u=[{id:"a1",platform:"Facebook",amount:200,purpose:r.TESTING,date:"2023-10-05"},{id:"a2",platform:"Instagram",amount:500,purpose:r.SCALING,date:"2023-10-10"}],h=[{id:"o1",customerName:"Ahmed B.",city:"Casablanca",productId:"p1",quantity:1,status:i.DELIVERED,date:"2023-10-12",lastUpdated:"2023-10-14",finalPrice:350,manualShippingCost:35},{id:"o2",customerName:"Sara K.",city:"Rabat",productId:"p1",quantity:1,status:i.DELIVERED,date:"2023-10-12",lastUpdated:"2023-10-14",finalPrice:350,manualShippingCost:35},{id:"o3",customerName:"Omar L.",city:"Marrakech",productId:"p1",quantity:1,status:i.SHIPPED,date:"2023-10-13",lastUpdated:"2023-10-13",finalPrice:350,manualShippingCost:35},{id:"o4",customerName:"Yassine M.",city:"Tangier",productId:"p1",quantity:1,status:i.RETURNED_PAID,date:"2023-10-11",lastUpdated:"2023-10-15",finalPrice:350,manualShippingCost:35},{id:"o5",customerName:"Fatima Z.",city:"Fes",productId:"p1",quantity:2,status:i.PENDING,date:"2023-10-15",lastUpdated:"2023-10-15",finalPrice:700,manualShippingCost:35}],p=e=>{let{children:t}=e,[s,a]=(0,d.useState)(!1),[l,i]=(0,d.useState)([]),[r,p]=(0,d.useState)([]),[b,g]=(0,d.useState)([]),[j,f]=(0,d.useState)([]);return(0,d.useEffect)(()=>{let e=localStorage.getItem(c);if(e)try{let t=JSON.parse(e);i(t.materials||[]),p(t.products||[]),g(t.orders||[]),f(t.ads||[])}catch(e){console.error("Failed to parse data",e),i(x),p(m),g(h),f(u)}else i(x),p(m),g(h),f(u);a(!0)},[]),(0,d.useEffect)(()=>{s&&localStorage.setItem(c,JSON.stringify({materials:l,products:r,orders:b,ads:j}))},[l,r,b,j,s]),(0,n.jsx)(o.Provider,{value:{materials:l,products:r,orders:b,ads:j,addMaterial:e=>{let t={...e,id:Math.random().toString(36).substr(2,9),remainingUnits:e.yield};i(e=>[...e,t])},updateMaterial:e=>{i(t=>t.map(t=>t.id===e.id?e:t))},deleteMaterial:e=>{i(t=>t.filter(t=>t.id!==e))},addProduct:e=>{p(t=>[...t,{...e,id:Math.random().toString(36).substr(2,9)}])},updateProduct:e=>{p(t=>t.map(t=>t.id===e.id?e:t))},deleteProduct:e=>{p(t=>t.filter(t=>t.id!==e))},addOrder:e=>{g(t=>[...t,{...e,id:Math.random().toString(36).substr(2,9),lastUpdated:new Date().toISOString()}])},updateOrderStatus:(e,t)=>{g(s=>s.map(s=>s.id===e?{...s,status:t,lastUpdated:new Date().toISOString()}:s))},updateOrder:e=>{g(t=>t.map(t=>t.id===e.id?{...e,lastUpdated:new Date().toISOString()}:t))},deleteOrder:e=>{g(t=>t.filter(t=>t.id!==e))},addAdSpend:e=>{f(t=>[...t,{...e,id:Math.random().toString(36).substr(2,9)}])},updateAdSpend:e=>{f(t=>t.map(t=>t.id===e.id?e:t))},deleteAdSpend:e=>{f(t=>t.filter(t=>t.id!==e))},resetData:()=>{window.confirm("This will reset all data to the initial demo state. Are you sure?")&&(i(x),p(m),g(h),f(u))},clearAllData:()=>{window.confirm("Warning: This will DELETE ALL DATA (including Products). This action cannot be undone.")&&(i([]),p([]),g([]),f([]))},startFresh:()=>{window.confirm("⚠️ RESET BUSINESS DATA?\n\nThis will DELETE:\n• All Orders\n• All Ad Spend records\n• All Material Inventory\n\nIt will KEEP:\n• Your Product Definitions\n\nThis action cannot be undone. Are you sure you want to start fresh?")&&(g([]),f([]),i([]),p(e=>e.map(e=>({...e,materialIds:[]}))))}},children:t})},b=()=>{let e=(0,d.useContext)(o);if(!e)throw Error("useApp must be used within AppProvider");return e};var g=s(998),j=s(4822),f=s(3116),N=s(8759),v=s(5790),y=s(4322),w=s(3948),S=s(2574),C=s(8783),D=s(5688),E=s(2549),k=s(5253),A=s(261),R=s(6573),P=s(4235),I=s(39),M=s(6812),O=s(1125);let T=()=>{let{orders:e,products:t,materials:s,ads:a,startFresh:l}=b(),[o,c]=(0,d.useState)("PERFORMANCE"),[x,m]=(0,d.useState)(!1),u=e=>{let t=0;return e.materialIds.forEach(e=>{let a=s.find(t=>t.id===e);a&&a.yield>0&&(t+=a.cost/a.yield)}),t},h=(0,d.useMemo)(()=>{let l=e.filter(e=>e.status===i.DELIVERED),n=e.filter(e=>e.status===i.RETURNED_FREE),d=e.filter(e=>e.status===i.RETURNED_PAID),o=e.filter(e=>e.status===i.LOST_DAMAGED),c=l.reduce((e,t)=>e+(t.finalPrice||0),0),x=s.reduce((e,t)=>e+t.cost,0)+a.reduce((e,t)=>e+t.amount,0)+e.reduce((e,t)=>t.status===i.PENDING||t.status===i.CONFIRMED?e:e+(void 0!==t.manualShippingCost?t.manualShippingCost:0),0),m=s.reduce((e,t)=>t.yield<=0?e:e+t.cost/t.yield*t.remainingUnits,0),h=a.filter(e=>e.purpose===r.SCALING).reduce((e,t)=>e+t.amount,0),p=0,b=0;l.forEach(e=>{let s=t.find(t=>t.id===e.productId);if(s){let t=e.quantity||1,a=(u(s)+s.laborCost+s.packagingCost)*t,l=void 0!==e.manualShippingCost?e.manualShippingCost:s.shippingCost;p+=a+l}}),n.forEach(e=>{let s=t.find(t=>t.id===e.productId);if(s){let t=e.quantity||1;b+=s.packagingCost*t}}),d.forEach(e=>{let s=t.find(t=>t.id===e.productId);if(s){let t=e.quantity||1,a=void 0!==e.manualShippingCost?e.manualShippingCost:s.shippingCost;b+=s.packagingCost*t+a}}),o.forEach(e=>{let s=t.find(t=>t.id===e.productId);if(s){let t=e.quantity||1,a=(u(s)+s.laborCost+s.packagingCost)*t,l=void 0!==e.manualShippingCost?e.manualShippingCost:s.shippingCost;b+=a+l}});let g=c-p-b-h,j=l.reduce((e,t)=>e+(t.quantity||1),0),f=e.length,N=l.length+n.length+d.length+o.length,v=N>0?Math.round(l.length/N*100):0,y=t[0],w=0;if(y){let e=u(y),t=y.price,s=e+y.laborCost+y.packagingCost+y.shippingCost,a=y.shippingCost+y.packagingCost;w=a/(t-s+a)*100}return{cashBalance:c-x,totalRevenue:c,totalExpenses:x,inventoryValue:m,campaignProfit:g,profitPerWallet:j>0?g/j:0,deliveryRate:v,breakEvenDeliveryRate:w,cpa:f>0?h/f:0,cpd:j>0?h/j:0,deliveredCount:j,scalingAdSpend:h,breakdown:{revenue:c,cogs:p,losses:b,marketing:h}}},[e,t,s,a]),p=0===h.deliveredCount&&0===e.length?{type:"neutral",text:"Ready to start? Add your first order to see business insights."}:h.deliveryRate>0&&h.deliveryRate<h.breakEvenDeliveryRate+5?{type:"danger",text:"\uD83D\uDCC9 Action Needed: Your delivery rate (".concat(h.deliveryRate,"%) is critically low. Call customers to confirm orders before shipping.")}:h.profitPerWallet<0?{type:"warning",text:"\uD83D\uDED1 Profit Warning: You are losing money on every delivered wallet. Review your ad spend or increase pricing."}:h.cashBalance<0&&h.inventoryValue>Math.abs(h.cashBalance)?{type:"info",text:"\uD83D\uDCA1 Cash Notice: Your cash flow is negative, but your business is healthy. Your money is currently sitting in Inventory."}:h.profitPerWallet>50&&h.deliveryRate>60?{type:"success",text:"\uD83D\uDE80 Scaling Opportunity: You are making solid profit per wallet. It is safe to increase ad budget."}:{type:"neutral",text:"\uD83D\uDCCA Keep tracking. Improving delivery rate is the fastest way to increase profit."},T=[{name:"Week 1",cash:500,profit:200},{name:"Week 2",cash:-200,profit:450},{name:"Week 3",cash:150,profit:800},{name:"Week 4",cash:h.cashBalance,profit:h.campaignProfit}],F=e=>{let{title:t,value:s,subtext:a,icon:l,variant:i="neutral",onClick:r,highlightValue:d=!1}=e;return(0,n.jsxs)("div",{onClick:r,className:"p-5 rounded-xl border shadow-sm ".concat({neutral:"bg-white border-slate-200 text-slate-900",success:"bg-emerald-50 border-emerald-200 text-emerald-900",danger:"bg-rose-50 border-rose-200 text-rose-900",warning:"bg-amber-50 border-amber-200 text-amber-900",info:"bg-blue-50 border-blue-200 text-blue-900",gray:"bg-slate-50 border-slate-200 text-slate-600"}[i]," ").concat(r?"cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]":""),children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsx)("h3",{className:"text-sm font-medium opacity-80",children:t}),(0,n.jsx)(l,{className:"w-5 h-5 opacity-50"})]}),(0,n.jsx)("div",{className:"text-2xl font-bold ".concat(d?"text-3xl":""),children:s}),a&&(0,n.jsx)("div",{className:"text-xs mt-1 opacity-70 font-medium",children:a})]})};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Business Pulse"}),(0,n.jsx)("p",{className:"text-slate-500 text-sm",children:"Making decisions based on data, not feelings."})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,n.jsxs)("div",{className:"bg-slate-100 p-1 rounded-lg border border-slate-200 flex",children:[(0,n.jsxs)("button",{onClick:()=>c("PERFORMANCE"),className:"px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ".concat("PERFORMANCE"===o?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[(0,n.jsx)(g.Z,{className:"w-4 h-4"})," Performance"]}),(0,n.jsxs)("button",{onClick:()=>c("CASHFLOW"),className:"px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ".concat("CASHFLOW"===o?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"),children:[(0,n.jsx)(j.Z,{className:"w-4 h-4"})," Cash Flow"]})]}),(0,n.jsxs)("button",{onClick:l,className:"px-3 py-2 text-xs font-medium text-slate-600 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition flex items-center gap-1 shadow-sm justify-center",children:[(0,n.jsx)(f.Z,{className:"w-3 h-3"})," Reset"]})]})]}),(0,n.jsxs)("div",{className:"p-4 rounded-lg border flex items-start gap-3 shadow-sm ".concat("danger"===p.type?"bg-rose-50 border-rose-200 text-rose-900":"warning"===p.type?"bg-amber-50 border-amber-200 text-amber-900":"success"===p.type?"bg-emerald-50 border-emerald-200 text-emerald-900":"bg-indigo-50 border-indigo-200 text-indigo-900"),children:[(0,n.jsx)(N.Z,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,n.jsx)("p",{className:"text-sm font-medium leading-relaxed",children:p.text})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 animate-in fade-in duration-300",children:["PERFORMANCE"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,{title:"Campaign Profit",value:"".concat(h.campaignProfit.toFixed(0)," MAD"),subtext:"After ads & returns",icon:v.Z,variant:h.campaignProfit>=0?"success":"warning",onClick:()=>m(!0)}),(0,n.jsx)(F,{title:"Real Profit per Wallet",value:"".concat(h.profitPerWallet.toFixed(0)," MAD"),subtext:"Based on delivered items only",icon:y.Z,variant:h.profitPerWallet>0?"success":"warning"}),(0,n.jsx)(F,{title:"Ad Spend (Scaling)",value:"".concat(h.cpa.toFixed(0)," MAD"),subtext:"Total Spent: ".concat(h.scalingAdSpend.toFixed(0)," MAD"),icon:w.Z,variant:"neutral",highlightValue:!0}),(0,n.jsx)(F,{title:"Delivery Rate",value:"".concat(h.deliveryRate,"%"),subtext:"Break-even: ".concat(h.breakEvenDeliveryRate.toFixed(0),"%"),icon:g.Z,variant:h.deliveryRate<h.breakEvenDeliveryRate?"danger":"neutral"})]}),"CASHFLOW"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,{title:"Net Cash Flow",value:"".concat(h.cashBalance.toFixed(0)," MAD"),subtext:"Real money In - Out",icon:j.Z,variant:h.cashBalance>=0?"info":"gray"}),(0,n.jsx)(F,{title:"Stock Value",value:"".concat(h.inventoryValue.toFixed(0)," MAD"),subtext:"Materials on shelf (Asset)",icon:S.Z,variant:"neutral"}),(0,n.jsx)(F,{title:"Total Revenue",value:"".concat(h.totalRevenue.toFixed(0)," MAD"),subtext:"Cash Collected",icon:C.Z,variant:"success"}),(0,n.jsx)(F,{title:"Total Expenses",value:"".concat(h.totalExpenses.toFixed(0)," MAD"),subtext:"Materials + Ads + Ship",icon:D.Z,variant:"neutral"})]})]}),(0,n.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm h-80",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-slate-800",children:"CASHFLOW"===o?"Cash Flow Trajectory":"Profit Trajectory"}),(0,n.jsx)("span",{className:"text-xs text-slate-400 font-medium px-2 py-1 bg-slate-50 rounded",children:"Last 30 Days"})]}),(0,n.jsx)(k.h,{width:"100%",height:"100%",children:(0,n.jsxs)(A.T,{data:T,children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,n.jsx)("stop",{offset:"5%",stopColor:"CASHFLOW"===o?"#0ea5e9":"#4f46e5",stopOpacity:.1}),(0,n.jsx)("stop",{offset:"95%",stopColor:"CASHFLOW"===o?"#0ea5e9":"#4f46e5",stopOpacity:0})]})}),(0,n.jsx)(R.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),(0,n.jsx)(P.K,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12}}),(0,n.jsx)(I.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12}}),(0,n.jsx)(M.u,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,n.jsx)(O.u,{type:"monotone",dataKey:"CASHFLOW"===o?"cash":"profit",stroke:"CASHFLOW"===o?"#0ea5e9":"#4f46e5",strokeWidth:2,fillOpacity:1,fill:"url(#colorValue)",name:"CASHFLOW"===o?"Net Cash":"Net Profit"})]})})]}),x&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm animate-in fade-in zoom-in-95 duration-200",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-slate-100",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-slate-800",children:"Campaign Profit Breakdown"}),(0,n.jsx)("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-slate-600",children:(0,n.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,n.jsxs)("div",{className:"p-6 space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,n.jsx)("span",{className:"font-medium text-slate-700",children:"Total Revenue"}),(0,n.jsxs)("span",{className:"font-bold text-slate-900",children:[h.breakdown.revenue.toFixed(0)," MAD"]})]}),(0,n.jsx)("div",{className:"border-t border-slate-100 my-2"}),(0,n.jsxs)("div",{className:"flex justify-between items-center text-sm text-slate-500",children:[(0,n.jsx)("span",{children:"Direct Costs (COGS)"}),(0,n.jsxs)("span",{className:"text-rose-600",children:["-",h.breakdown.cogs.toFixed(0)," MAD"]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center text-sm text-slate-500",children:[(0,n.jsx)("span",{children:"Returns & Losses"}),(0,n.jsxs)("span",{className:"text-rose-600",children:["-",h.breakdown.losses.toFixed(0)," MAD"]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center text-sm text-slate-500",children:[(0,n.jsx)("span",{children:"Marketing (Scaling)"}),(0,n.jsxs)("span",{className:"text-rose-600",children:["-",h.breakdown.marketing.toFixed(0)," MAD"]})]}),(0,n.jsxs)("div",{className:"border-t border-slate-200 my-2 pt-2 flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-bold text-slate-800",children:"Net Campaign Profit"}),(0,n.jsxs)("span",{className:"font-bold text-lg ".concat(h.campaignProfit>=0?"text-emerald-600":"text-amber-600"),children:[h.campaignProfit.toFixed(0)," MAD"]})]}),(0,n.jsx)("p",{className:"text-xs text-slate-400 text-center pt-2",children:'This is your "Real Business Health". It accounts for all costs including ads and returns.'})]})]})})]})};var F=s(9312),Z=s(1138),L=s(4136);let U=()=>{let{materials:e,addMaterial:t,updateMaterial:s,deleteMaterial:a}=b(),[l,i]=(0,d.useState)(!1),[r,o]=(0,d.useState)(null),[c,x]=(0,d.useState)(""),[m,u]=(0,d.useState)(""),[h,p]=(0,d.useState)(""),[g,j]=(0,d.useState)(""),f=e=>{o(e.id),x(e.name),u(e.cost.toString()),p(e.yield.toString()),j(e.remainingUnits.toString()),i(!0)},N=e=>{window.confirm("Are you sure you want to delete this material?")&&(a(e),r===e&&i(!1))},v="w-full p-2 bg-white border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm text-slate-900 placeholder-slate-400";return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Materials & Stock"}),(0,n.jsxs)("button",{onClick:()=>{o(null),x(""),u(""),p(""),j(""),i(!0)},className:"bg-slate-900 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-800 transition",children:[(0,n.jsx)(F.Z,{className:"w-4 h-4"})," Add Bulk Purchase"]})]}),l&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg animate-in fade-in zoom-in-95 duration-200",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-slate-100",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-slate-800",children:r?"Edit Material":"Record New Material"}),(0,n.jsx)("button",{onClick:()=>i(!1),className:"text-slate-400 hover:text-slate-600",children:(0,n.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,n.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),r){let t=e.find(e=>e.id===r);t&&s({...t,name:c,cost:Number(m),yield:Number(h),remainingUnits:Number(g)})}else t({name:c,cost:Number(m),yield:Number(h),date:new Date().toISOString().split("T")[0]});i(!1),x(""),u(""),p(""),j("")},className:"p-6 space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Material Name"}),(0,n.jsx)("input",{required:!0,type:"text",value:c,onChange:e=>x(e.target.value),className:v,placeholder:"e.g., Full Hide Leather"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Total Cost (MAD)"}),(0,n.jsx)("input",{required:!0,type:"number",value:m,onChange:e=>u(e.target.value),className:v,placeholder:"300"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Yield (Est. Wallets)"}),(0,n.jsx)("input",{required:!0,type:"number",value:h,onChange:e=>p(e.target.value),className:v,placeholder:"15"})]})]}),r&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Remaining Stock"}),(0,n.jsx)("input",{required:!0,type:"number",value:g,onChange:e=>j(e.target.value),className:v})]}),(0,n.jsxs)("div",{className:"bg-indigo-50 p-3 rounded text-sm text-indigo-800",children:["\uD83D\uDCA1 Cost per wallet will be: ",(0,n.jsxs)("strong",{children:[m&&h?(Number(m)/Number(h)).toFixed(2):"0.00"," MAD"]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[r&&(0,n.jsxs)("button",{type:"button",onClick:()=>N(r),className:"mr-auto px-4 py-2 bg-rose-50 text-rose-600 rounded-md hover:bg-rose-100 flex items-center gap-2",children:[(0,n.jsx)(Z.Z,{className:"w-4 h-4"})," Delete"]}),(0,n.jsx)("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-md",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:r?"Update":"Save Material"})]})]})]})}),(0,n.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:(0,n.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,n.jsx)("thead",{className:"bg-slate-50 text-slate-500 font-medium border-b border-slate-200",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"p-4",children:"Material"}),(0,n.jsx)("th",{className:"p-4",children:"Bulk Cost"}),(0,n.jsx)("th",{className:"p-4",children:"Est. Yield"}),(0,n.jsx)("th",{className:"p-4",children:"Cost / Unit"}),(0,n.jsx)("th",{className:"p-4",children:"Remaining"}),(0,n.jsx)("th",{className:"p-4 text-right",children:"Actions"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-slate-100",children:[e.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,n.jsx)("td",{className:"p-4 font-medium text-slate-900",children:e.name}),(0,n.jsxs)("td",{className:"p-4 text-rose-600",children:["-",e.cost," MAD"]}),(0,n.jsxs)("td",{className:"p-4",children:[e.yield," units"]}),(0,n.jsxs)("td",{className:"p-4 text-emerald-600 font-semibold",children:[(e.cost/e.yield).toFixed(2)," MAD"]}),(0,n.jsx)("td",{className:"p-4",children:(0,n.jsxs)("span",{className:"bg-slate-100 px-2 py-1 rounded text-slate-600",children:[e.remainingUnits," left"]})}),(0,n.jsx)("td",{className:"p-4 text-right",children:(0,n.jsx)("button",{onClick:()=>f(e),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-white rounded border border-transparent hover:border-slate-200 transition",title:"Modify",children:(0,n.jsx)(L.Z,{className:"w-4 h-4"})})})]},e.id)),0===e.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"p-8 text-center text-slate-400",children:"No materials recorded yet."})})]})]})})]})};var q=s(6141),G=s(3008),B=s(1961),W=s(4280),_=s(2104),H=s(5650),V=s(6142),z=s(4891);let Y=()=>{let{orders:e,updateOrderStatus:t,products:s,addOrder:a,updateOrder:l,deleteOrder:r}=b(),[o,c]=(0,d.useState)(!1),[x,m]=(0,d.useState)(null),[u,h]=(0,d.useState)(""),[p,g]=(0,d.useState)(""),[j,f]=(0,d.useState)(""),[N,v]=(0,d.useState)(1),[w,S]=(0,d.useState)(i.PENDING),[C,D]=(0,d.useState)(""),[k,A]=(0,d.useState)(""),[R,P]=(0,d.useState)(""),I=e=>{switch(e){case i.PENDING:return"bg-slate-100 text-slate-600 border-slate-200";case i.CONFIRMED:return"bg-blue-50 text-blue-700 border-blue-200";case i.SHIPPED:return"bg-purple-50 text-purple-700 border-purple-200";case i.DELIVERED:return"bg-emerald-50 text-emerald-700 border-emerald-200";case i.RETURNED_FREE:return"bg-amber-50 text-amber-700 border-amber-200";case i.RETURNED_PAID:return"bg-rose-50 text-rose-700 border-rose-200";case i.LOST_DAMAGED:return"bg-gray-800 text-white border-gray-600"}},M=e=>{switch(e){case i.PENDING:return q.Z;case i.CONFIRMED:return G.Z;case i.SHIPPED:return B.Z;case i.DELIVERED:return y.Z;case i.RETURNED_FREE:return W.Z;case i.RETURNED_PAID:return _.Z;case i.LOST_DAMAGED:return H.Z}},O=e=>{var t,a,l,i,r;m(e.id),h(e.customerName),g(e.city||""),f(e.productId),v(e.quantity||1),S(e.status),D(e.date);let n=s.find(t=>t.id===e.productId);A(null!==(l=null===(t=e.finalPrice)||void 0===t?void 0:t.toString())&&void 0!==l?l:n?(n.price*(e.quantity||1)).toString():"0"),P(null!==(r=null!==(i=null===(a=e.manualShippingCost)||void 0===a?void 0:a.toString())&&void 0!==i?i:null==n?void 0:n.shippingCost.toString())&&void 0!==r?r:"0"),c(!0)},T=e=>{f(e);let t=s.find(t=>t.id===e);t&&(A((t.price*N).toString()),P(t.shippingCost.toString()))},U=e=>{let t=Math.max(1,N+e);if(v(t),j){let e=s.find(e=>e.id===j);e&&A((e.price*t).toString())}},Y=e=>{if(S(e),e===i.RETURNED_FREE)P("0");else if(e===i.RETURNED_PAID&&j){let e=s.find(e=>e.id===j);e&&P(e.shippingCost.toString())}},K=(e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),window.confirm("Are you sure you want to delete this order?")&&(r(e),c(!1))},J=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),Q="w-full p-2 bg-white border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm text-slate-900 placeholder-slate-400";return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Orders"}),(0,n.jsxs)("button",{onClick:()=>{m(null),h(""),g("");let e=s.length>0?s[0]:null;f(e?e.id:""),v(1),S(i.PENDING),D(new Date().toISOString().split("T")[0]),e?(A(e.price.toString()),P(e.shippingCost.toString())):(A(""),P("")),c(!0)},className:"bg-slate-900 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-800 transition",children:[(0,n.jsx)(F.Z,{className:"w-4 h-4"})," New Order"]})]}),o&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md animate-in fade-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-slate-800",children:x?"Modify Order":"New Order"}),(0,n.jsx)("button",{type:"button",onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600",children:(0,n.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,n.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!j)return;let s={customerName:u,city:p,productId:j,quantity:N,status:w,date:C,finalPrice:Number(k),manualShippingCost:Number(R)};if(x){let t=e.find(e=>e.id===x);t&&l({...t,...s})}else a(s);c(!1)},className:"p-6 space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Customer Name"}),(0,n.jsx)("input",{required:!0,type:"text",value:u,onChange:e=>h(e.target.value),className:Q,placeholder:"e.g. Ahmed Benali"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"City"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{required:!0,type:"text",value:p,onChange:e=>g(e.target.value),className:"".concat(Q," pl-8"),placeholder:"e.g. Casablanca"}),(0,n.jsx)(V.Z,{className:"w-4 h-4 absolute left-2.5 top-3 text-slate-400"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),(0,n.jsxs)("select",{value:w,onChange:e=>Y(e.target.value),className:Q,children:[(0,n.jsx)("option",{value:i.PENDING,children:"Pending"}),(0,n.jsx)("option",{value:i.CONFIRMED,children:"Confirmed"}),(0,n.jsx)("option",{value:i.SHIPPED,children:"Shipped"}),(0,n.jsx)("option",{value:i.DELIVERED,children:"Delivered"}),(0,n.jsx)("option",{disabled:!0,children:"---"}),(0,n.jsx)("option",{value:i.RETURNED_FREE,children:"Refused (Free Return)"}),(0,n.jsx)("option",{value:i.RETURNED_PAID,children:"Refused (Paid Return)"}),(0,n.jsx)("option",{value:i.LOST_DAMAGED,children:"Lost / Damaged"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex justify-between items-center mb-1",children:(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Product"})}),(0,n.jsxs)("select",{required:!0,value:j,onChange:e=>T(e.target.value),className:Q,children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Select a product..."}),s.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Quantity"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("button",{type:"button",onClick:()=>U(-1),className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-md text-slate-600 transition",children:(0,n.jsx)(z.Z,{className:"w-4 h-4"})}),(0,n.jsx)("div",{className:"flex-1 text-center font-bold text-lg text-slate-800 bg-slate-50 border border-slate-200 py-1.5 rounded-md",children:N}),(0,n.jsx)("button",{type:"button",onClick:()=>U(1),className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-md text-slate-600 transition",children:(0,n.jsx)(F.Z,{className:"w-4 h-4"})})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,n.jsx)("div",{className:"col-span-2 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Financial Specifics"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Total Revenue"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{required:!0,type:"number",value:k,onChange:e=>A(e.target.value),className:"".concat(Q," pl-6")}),(0,n.jsx)("span",{className:"absolute left-2 top-2.5 text-slate-400 text-xs",children:"DH"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Shipping Cost"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{required:!0,type:"number",value:R,onChange:e=>P(e.target.value),className:"".concat(Q," pl-6")}),(0,n.jsx)("span",{className:"absolute left-2 top-2.5 text-slate-400 text-xs",children:"DH"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),(0,n.jsx)("input",{required:!0,type:"date",value:C,onChange:e=>D(e.target.value),className:Q})]}),(0,n.jsxs)("div",{className:"pt-6 flex flex-col-reverse gap-3 sm:flex-row",children:[x&&(0,n.jsxs)("button",{type:"button",onClick:e=>K(x,e),className:"px-4 py-3 sm:py-2 bg-rose-50 text-rose-600 hover:bg-rose-100 rounded-lg transition flex items-center justify-center gap-2 font-medium w-full sm:w-auto",children:[(0,n.jsx)(Z.Z,{className:"w-5 h-5"})," Delete"]}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsxs)("div",{className:"flex gap-3 w-full sm:w-auto",children:[(0,n.jsx)("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-3 sm:py-2 text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg transition text-center",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 sm:py-2 text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition font-medium text-center",children:x?"Update":"Create"})]})]})]})]})}),(0,n.jsxs)("div",{className:"grid gap-3",children:[J.map(e=>{let t=s.find(t=>t.id===e.productId),a=M(e.status),l=e.quantity||1;return(0,n.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full border ".concat(I(e.status)," min-w-[150px] justify-center"),children:[(0,n.jsx)(a,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"font-semibold text-xs whitespace-nowrap",children:e.status})]}),(0,n.jsxs)("div",{className:"border-l border-slate-200 pl-4",children:[(0,n.jsx)("div",{className:"font-medium text-slate-800",children:e.customerName}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-0.5",children:[(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[null==t?void 0:t.name,l>1&&(0,n.jsxs)("span",{className:"bg-slate-800 text-white text-[10px] px-1.5 rounded-full font-bold",children:["x",l]})]}),e.city&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),(0,n.jsxs)("span",{className:"flex items-center gap-0.5",children:[(0,n.jsx)(V.Z,{className:"w-3 h-3"})," ",e.city]})]})]})]})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>O(e),className:"flex items-center gap-2 px-4 py-2 text-sm bg-slate-50 text-slate-600 border border-slate-200 hover:bg-white hover:border-indigo-300 hover:text-indigo-600 rounded-lg transition font-medium shadow-sm",children:[(0,n.jsx)(L.Z,{className:"w-4 h-4"})," Modify"]})]},e.id)}),0===e.length&&(0,n.jsxs)("div",{className:"text-center py-12 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl text-slate-400",children:[(0,n.jsx)(y.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),(0,n.jsx)("p",{children:"No orders yet. Add one to start tracking!"})]})]})]})};var K=s(525);let J=()=>{let{ads:e,addAdSpend:t,updateAdSpend:s,deleteAdSpend:a}=b(),[l,i]=(0,d.useState)(null),[o,c]=(0,d.useState)(""),[x,m]=(0,d.useState)("Facebook"),[u,h]=(0,d.useState)(r.SCALING),p=e=>{i(e.id),c(e.amount.toString()),m(e.platform),h(e.purpose)},g=e=>{window.confirm("Delete this ad spend record?")&&(a(e),l===e&&j())},j=()=>{i(null),c(""),h(r.SCALING),m("Facebook")},f="w-full p-2 bg-white border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm text-slate-900 placeholder-slate-400";return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Ad Spend Tracker"}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm h-fit",children:[(0,n.jsxs)("h3",{className:"font-semibold mb-4 flex items-center justify-between gap-2",children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(w.Z,{className:"w-4 h-4"})," ",l?"Edit Ad Spend":"Record Daily Spend"]}),l&&(0,n.jsxs)("button",{onClick:j,className:"text-xs text-slate-400 hover:text-slate-600 flex items-center gap-1",children:[(0,n.jsx)(E.Z,{className:"w-3 h-3"})," Cancel"]})]}),(0,n.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),l){let t=e.find(e=>e.id===l);t&&s({...t,platform:x,amount:Number(o),purpose:u}),i(null)}else t({platform:x,amount:Number(o),purpose:u,date:new Date().toISOString().split("T")[0]});c(""),h(r.SCALING),m("Facebook")},className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Platform"}),(0,n.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:f,children:[(0,n.jsx)("option",{value:"Facebook",children:"Facebook"}),(0,n.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,n.jsx)("option",{value:"TikTok",children:"TikTok"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Amount (MAD)"}),(0,n.jsx)("input",{required:!0,type:"number",value:o,onChange:e=>c(e.target.value),className:f,placeholder:"100"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Purpose"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsxs)("button",{type:"button",onClick:()=>h(r.SCALING),className:"p-2 text-sm rounded border ".concat(u===r.SCALING?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"border-slate-200 hover:bg-slate-50"),children:["Scaling",(0,n.jsx)("span",{className:"block text-xs font-normal opacity-70",children:"Counts to Unit Profit"})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>h(r.TESTING),className:"p-2 text-sm rounded border ".concat(u===r.TESTING?"bg-amber-50 border-amber-500 text-amber-700 font-bold":"border-slate-200 hover:bg-slate-50"),children:["Testing",(0,n.jsx)("span",{className:"block text-xs font-normal opacity-70",children:"Investment / OpEx"})]})]})]}),(0,n.jsx)("button",{className:"w-full py-2 text-white rounded-md transition ".concat(l?"bg-indigo-600 hover:bg-indigo-700":"bg-slate-900 hover:bg-slate-800"),children:l?"Update Spend":"Record Spend"})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm flex flex-col",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-slate-100 bg-slate-50 font-medium text-slate-500 flex justify-between",children:[(0,n.jsx)("span",{children:"Recent Spend"}),(0,n.jsx)(K.Z,{className:"w-5 h-5"})]}),(0,n.jsxs)("div",{className:"overflow-y-auto max-h-[400px]",children:[e.slice().reverse().map(e=>(0,n.jsxs)("div",{className:"p-4 border-b border-slate-50 flex justify-between items-center transition ".concat(l===e.id?"bg-indigo-50":"hover:bg-slate-50"),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium text-slate-800",children:e.platform}),(0,n.jsxs)("div",{className:"text-xs text-slate-500",children:[e.date," • ",(0,n.jsx)("span",{className:e.purpose===r.SCALING?"text-indigo-600":"text-amber-600",children:e.purpose})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("span",{className:"font-bold text-rose-600",children:["-",e.amount," MAD"]}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("button",{onClick:()=>p(e),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-white rounded border border-transparent hover:border-slate-200",children:(0,n.jsx)(L.Z,{className:"w-3 h-3"})}),(0,n.jsx)("button",{onClick:()=>g(e.id),className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-white rounded border border-transparent hover:border-slate-200",children:(0,n.jsx)(Z.Z,{className:"w-3 h-3"})})]})]})]},e.id)),0===e.length&&(0,n.jsx)("div",{className:"p-8 text-center text-slate-400 text-sm",children:"No ad spend recorded."})]})]})]})]})};var Q=s(7172),X=s(3673),$=s(4808);let ee=()=>{let{products:e,materials:t,addProduct:s,updateProduct:a,deleteProduct:l}=b(),[i,r]=(0,d.useState)(!1),[o,c]=(0,d.useState)(null),[x,m]=(0,d.useState)(""),[u,h]=(0,d.useState)(""),[p,g]=(0,d.useState)(""),[j,f]=(0,d.useState)(""),[N,v]=(0,d.useState)(""),[y,w]=(0,d.useState)([]),S="w-full p-2 bg-white border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm text-slate-900 placeholder-slate-400",C=e=>{c(e.id),m(e.name),h(e.price.toString()),g(e.laborCost.toString()),f(e.packagingCost.toString()),v(e.shippingCost.toString()),w(e.materialIds),r(!0)},D=e=>{window.confirm("Are you sure you want to delete this product?")&&(l(e),r(!1))},k=e=>{w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},A=e=>{let s=0;return e.materialIds.forEach(e=>{let a=t.find(t=>t.id===e);a&&a.yield>0&&(s+=a.cost/a.yield)}),s+e.laborCost+e.packagingCost+e.shippingCost},R=(e,t)=>{let s=A(e),a=100*(1-t);return(a*e.price-a*s-100*t*((e.shippingCost+e.packagingCost+e.packagingCost)/2))/100};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Product Management"}),(0,n.jsxs)("button",{onClick:()=>{c(null),m(""),h(""),g(""),f("0"),v("35"),w([]),r(!0)},className:"bg-slate-900 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-800 transition",children:[(0,n.jsx)(F.Z,{className:"w-4 h-4"})," Add Product"]})]}),(0,n.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>{let t=A(e),s=e.price-t;return(0,n.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 hover:shadow-md transition flex flex-col",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-slate-800",children:e.name}),(0,n.jsxs)("div",{className:"text-indigo-600 font-bold text-xl",children:[e.price," MAD"]})]}),(0,n.jsx)("button",{type:"button",onClick:()=>C(e),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition",children:(0,n.jsx)(L.Z,{className:"w-4 h-4"})})]}),(0,n.jsxs)("div",{className:"space-y-2 text-sm text-slate-600 mb-4 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Base Unit Cost:"}),(0,n.jsxs)("span",{className:"font-medium text-slate-900",children:[t.toFixed(0)," MAD"]})]}),(0,n.jsx)("div",{className:"flex justify-between text-xs text-slate-500",children:(0,n.jsx)("span",{children:"(Mat+Labor+Pack+Ship)"})}),(0,n.jsxs)("div",{className:"flex justify-between pt-2 border-t border-slate-200",children:[(0,n.jsx)("span",{children:"Max Profit (0% Returns):"}),(0,n.jsxs)("span",{className:"font-bold text-emerald-600",children:[s.toFixed(0)," MAD"]})]})]}),(0,n.jsxs)("div",{className:"mt-auto",children:[(0,n.jsxs)("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-2 flex items-center gap-1",children:[(0,n.jsx)(Q.Z,{className:"w-3 h-3"})," Profitability Simulator"]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-1 text-center text-xs",children:[(0,n.jsxs)("div",{className:"bg-emerald-50 p-1 rounded border border-emerald-100",children:[(0,n.jsx)("div",{className:"text-emerald-800 font-bold",children:R(e,.1).toFixed(0)}),(0,n.jsx)("div",{className:"text-[10px] text-emerald-600",children:"@10% Ret"})]}),(0,n.jsxs)("div",{className:"bg-amber-50 p-1 rounded border border-amber-100",children:[(0,n.jsx)("div",{className:"text-amber-800 font-bold",children:R(e,.3).toFixed(0)}),(0,n.jsx)("div",{className:"text-[10px] text-amber-600",children:"@30% Ret"})]}),(0,n.jsxs)("div",{className:"bg-rose-50 p-1 rounded border border-rose-100",children:[(0,n.jsx)("div",{className:"text-rose-800 font-bold",children:R(e,.5).toFixed(0)}),(0,n.jsx)("div",{className:"text-[10px] text-rose-600",children:"@50% Ret"})]})]})]})]},e.id)})}),i&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl animate-in fade-in zoom-in-95 duration-200 my-8 max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 sticky top-0 bg-white z-10",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-slate-800",children:o?"Edit Product":"New Product"}),(0,n.jsx)("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-slate-600",children:(0,n.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={name:x,price:Number(u),laborCost:Number(p),packagingCost:Number(j),shippingCost:Number(N),materialIds:y};o?a({...t,id:o}):s(t),r(!1)},className:"p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[(0,n.jsx)(X.Z,{className:"w-4 h-4"})," Basic Info"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Product Name"}),(0,n.jsx)("input",{required:!0,type:"text",value:x,onChange:e=>m(e.target.value),className:S,placeholder:"e.g. Cardholder"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Selling Price (MAD)"}),(0,n.jsx)("input",{required:!0,type:"number",value:u,onChange:e=>h(e.target.value),className:S,placeholder:"250"})]}),(0,n.jsxs)("div",{className:"pt-4",children:[(0,n.jsxs)("h4",{className:"font-medium text-slate-900 mb-2 flex items-center gap-2",children:[(0,n.jsx)($.Z,{className:"w-4 h-4"})," Material Used"]}),(0,n.jsxs)("div",{className:"border border-slate-200 rounded-md p-3 max-h-40 overflow-y-auto space-y-2 bg-slate-50",children:[t.map(e=>(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-slate-100 p-1 rounded",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.includes(e.id),onChange:()=>k(e.id),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)("span",{className:"text-slate-400 text-xs ml-auto",children:[(e.cost/e.yield).toFixed(1)," MAD/unit"]})]},e.id)),0===t.length&&(0,n.jsx)("div",{className:"text-xs text-slate-400",children:"No materials added yet."})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[(0,n.jsx)(B.Z,{className:"w-4 h-4"})," Cost Structure (Per Unit)"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Labor (Time Value)"}),(0,n.jsx)("input",{required:!0,type:"number",value:p,onChange:e=>g(e.target.value),className:S,placeholder:"e.g. 50"}),(0,n.jsx)("p",{className:"text-[10px] text-slate-500 mt-1",children:"Must be counted even if done by you."})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Packaging"}),(0,n.jsx)("input",{required:!0,type:"number",value:j,onChange:e=>f(e.target.value),className:S})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Avg Shipping"}),(0,n.jsx)("input",{required:!0,type:"number",value:N,onChange:e=>v(e.target.value),className:S})]})]}),(0,n.jsx)("div",{className:"bg-indigo-50 p-3 rounded text-xs text-indigo-800 mt-2",children:(0,n.jsx)("p",{children:"Shipping is tracked per order. This value is used for profit projections."})})]})]}),(0,n.jsxs)("div",{className:"pt-6 border-t border-slate-100 flex flex-col-reverse gap-3 sm:flex-row",children:[o&&(0,n.jsxs)("button",{type:"button",onClick:()=>D(o),className:"px-4 py-3 sm:py-2 bg-rose-50 text-rose-600 hover:bg-rose-100 rounded-lg transition font-medium flex items-center justify-center gap-2 w-full sm:w-auto",children:[(0,n.jsx)(Z.Z,{className:"w-4 h-4"})," Delete"]}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsxs)("div",{className:"flex gap-3 w-full sm:w-auto",children:[(0,n.jsx)("button",{type:"button",onClick:()=>r(!1),className:"flex-1 px-4 py-3 sm:py-2 text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg transition text-center",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 sm:py-2 text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition font-medium text-center",children:o?"Update Product":"Create Product"})]})]})]})]})})]})};var et=s(5119),es=s(6712);let ea=()=>{let[e,t]=(0,d.useState)("DASHBOARD");return(0,n.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col pb-20 md:pb-0",children:[(0,n.jsx)("div",{className:"md:hidden bg-white border-b border-slate-200 p-4 sticky top-0 z-10 flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 font-bold text-slate-800",children:[(0,n.jsx)(j.Z,{className:"w-6 h-6 text-indigo-600"}),(0,n.jsx)("span",{children:"Altaj Leather"})]})}),(0,n.jsxs)("div",{className:"flex flex-1",children:[(0,n.jsxs)("aside",{className:"hidden md:flex flex-col w-64 bg-white border-r border-slate-200 h-screen sticky top-0",children:[(0,n.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 font-bold text-xl text-slate-800",children:[(0,n.jsx)(j.Z,{className:"w-6 h-6 text-indigo-600"}),(0,n.jsx)("span",{children:"Altaj Leather"})]}),(0,n.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"For Moroccan Makers"})]}),(0,n.jsxs)("nav",{className:"flex-1 p-4 space-y-2",children:[(0,n.jsx)(el,{icon:et.Z,label:"Dashboard",isActive:"DASHBOARD"===e,onClick:()=>t("DASHBOARD")}),(0,n.jsx)(el,{icon:es.Z,label:"Orders (COD)",isActive:"ORDERS"===e,onClick:()=>t("ORDERS")}),(0,n.jsx)(el,{icon:X.Z,label:"Products",isActive:"PRODUCTS"===e,onClick:()=>t("PRODUCTS")}),(0,n.jsx)(el,{icon:y.Z,label:"Materials",isActive:"INVENTORY"===e,onClick:()=>t("INVENTORY")}),(0,n.jsx)(el,{icon:w.Z,label:"Ad Spend",isActive:"ADS"===e,onClick:()=>t("ADS")})]}),(0,n.jsx)("div",{className:"p-4 border-t border-slate-100",children:(0,n.jsx)("div",{className:"bg-slate-50 p-3 rounded text-xs text-slate-500",children:(0,n.jsx)("p",{children:"v1.0.0 • Morocco"})})})]}),(0,n.jsx)("main",{className:"flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full",children:(()=>{switch(e){case"DASHBOARD":default:return(0,n.jsx)(T,{});case"INVENTORY":return(0,n.jsx)(U,{});case"ORDERS":return(0,n.jsx)(Y,{});case"ADS":return(0,n.jsx)(J,{});case"PRODUCTS":return(0,n.jsx)(ee,{})}})()})]}),(0,n.jsxs)("div",{className:"md:hidden fixed bottom-0 w-full bg-white border-t border-slate-200 flex justify-around p-3 z-50 safe-area-bottom",children:[(0,n.jsx)(ei,{icon:et.Z,label:"Home",isActive:"DASHBOARD"===e,onClick:()=>t("DASHBOARD")}),(0,n.jsx)(ei,{icon:es.Z,label:"Orders",isActive:"ORDERS"===e,onClick:()=>t("ORDERS")}),(0,n.jsx)(ei,{icon:X.Z,label:"Items",isActive:"PRODUCTS"===e,onClick:()=>t("PRODUCTS")}),(0,n.jsx)(ei,{icon:y.Z,label:"Stock",isActive:"INVENTORY"===e,onClick:()=>t("INVENTORY")}),(0,n.jsx)(ei,{icon:w.Z,label:"Ads",isActive:"ADS"===e,onClick:()=>t("ADS")})]})]})},el=e=>{let{icon:t,label:s,isActive:a,onClick:l}=e;return(0,n.jsxs)("button",{onClick:l,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(a?"bg-indigo-50 text-indigo-700 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[(0,n.jsx)(t,{className:"w-5 h-5 ".concat(a?"text-indigo-600":"text-slate-400")}),s]})},ei=e=>{let{icon:t,label:s,isActive:a,onClick:l}=e;return(0,n.jsxs)("button",{onClick:l,className:"flex flex-col items-center justify-center w-full ".concat(a?"text-indigo-600":"text-slate-400"),children:[(0,n.jsx)(t,{className:"w-6 h-6 mb-1"}),(0,n.jsx)("span",{className:"text-[10px] font-medium",children:s})]})};var er=()=>(0,n.jsx)(p,{children:(0,n.jsx)(ea,{})})}},function(e){e.O(0,[267,971,938,744],function(){return e(e.s=1357)}),_N_E=e.O()}]);